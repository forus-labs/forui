import { Tabs } from 'nextra/components';
import { Widget } from '@/components/demo/widget.tsx';
import LinkBadge from '@/components/ui/link-badge/link-badge.tsx';
import LinkBadgeGroup from '@/components/ui/link-badge/link-badge-group.tsx';

# Popover Menu

A popover menu displays a menu in a portal aligned to a child.

<LinkBadgeGroup>
    <LinkBadge label="API Reference" href="https://pub.dev/documentation/forui/latest/forui.widgets.popover_menu/"/>
</LinkBadgeGroup>

<Tabs items={['Preview', 'Code']}>
  <Tabs.Tab>
    <Widget name='popover-menu' query={{}} height={500}/>
  </Tabs.Tab>
  <Tabs.Tab>
    ```dart copy
    class _PopoverMenu extends StatefulWidget {
      @override
      State<_PopoverMenu> createState() => _State();
    }

    class _State extends State<_PopoverMenu> with SingleTickerProviderStateMixin {
      late FPopoverController controller;

      @override
      void initState() {
        super.initState();
        controller = FPopoverController(vsync: this);
      }

      @override
      Widget build(BuildContext context) => FHeader(
        title: const Text('Edit Notes'),
        suffixes: [
          FPopoverMenu(
            popoverController: controller,
            menuAnchor: Alignment.topRight,
            childAnchor: Alignment.bottomRight,
            menu: [
              FTileGroup(
                children: [
                  FTile(
                    prefixIcon: Icon(FIcons.user),
                    title: const Text('Personalization'),
                    onPress: () {},
                  ),
                  FTile(
                    prefixIcon: Icon(FIcons.paperclip),
                    title: const Text('Add attachments'),
                    onPress: () {},
                  ),
                  FTile(
                    prefixIcon: Icon(FIcons.qrCode),
                    title: const Text('Scan Document'),
                    onPress: () {},
                  ),
                ],
              ),
              FTileGroup(
                children: [
                  FTile(
                    prefixIcon: Icon(FIcons.list),
                    title: const Text('List View'),
                    onPress: () {},
                  ),
                  FTile(
                    prefixIcon: Icon(FIcons.layoutGrid),
                    title: const Text('Grid View'),
                    onPress: () {},
                  ),
                ],
              ),
            ],
            child: FHeaderAction(
              icon: Icon(FIcons.ellipsis),
              onPress: controller.toggle,
            ),
          ),
        ],
      );

      @override
      void dispose() {
        controller.dispose();
        super.dispose();
      }
    }
    ```

  </Tabs.Tab>
</Tabs>

## CLI

To generate and customize this style:

```shell copy
dart run forui style create popover-menu 
```

## Usage

### `FPopoverMenu(...)`

```dart copy
FPopoverMenu(
  popoverController: FPopoverController(vsync: this),
  scrollController: ScrollController(),
  style: FPopoverMenuStyle(...),
  cacheExtent: 100,
  maxHeight: 200,
  dragStartBehavior: DragStartBehavior.start,
  menuAnchor: Alignment.topCenter,
  childAnchor: Alignment.bottomCenter,
  spacing: FPortalSpacing.zero,
  shift: FPortalShift.flip,
  offset: Offset.zero,
  groupId: 'popover-menu-group',
  hideOnTapOutside: FHidePopoverRegion.excludeTarget,
  traversalEdgeBehavior: TraversalEdgeBehavior.closedLoop,
  menu: [
    FTileGroup(
      children: [],
    ),
  ],
  child: const Placeholder(),
);
```

### `FPopoverMenu.automatic()`

```dart copy
FPopoverMenu.automatic(
  popoverController: FPopoverController(vsync: this),
  scrollController: ScrollController(),
  style: FPopoverMenuStyle(...),
  cacheExtent: 100,
  maxHeight: 200,
  dragStartBehavior: DragStartBehavior.start,
  menuAnchor: Alignment.topCenter,
  childAnchor: Alignment.bottomCenter,
  spacing: FPortalSpacing.zero,
  offset: Offset.zero,
  groupId: 'popover-menu-group',
  hideOnTapOutside: FHidePopoverRegion.excludeTarget,
  shift: FPortalShift.flip,
  traversalEdgeBehavior: TraversalEdgeBehavior.closedLoop,
  menu: [
    FTileGroup(
      children: [],
    ),
  ],
  child: const Placeholder(),
);
```
