import { Callout, Tabs } from 'nextra/components';
import { Widget } from '@/components/demo/widget.tsx';
import LinkBadge from '@/components/ui/link-badge/link-badge.tsx';
import LinkBadgeGroup from '@/components/ui/link-badge/link-badge-group.tsx';

# Sheet

A modal sheet is an alternative to a menu or a dialog and prevents the user from interacting with the rest of the app.
It navigates to a new page each time.

<LinkBadgeGroup>
    <LinkBadge label="API Reference" href="https://pub.dev/documentation/forui/latest/forui.widgets.sheet/"/>
</LinkBadgeGroup>

<Callout type="info">
    A closely related widget is a [persistent sheet](/docs/overlay/persistent-sheet), which shows information that
    supplements the primary content of the app without preventing the user from interacting with the app.
</Callout>

<Tabs items={['Preview', 'Code']}>
  <Tabs.Tab>
    <Widget name='modal-sheet' query={{}} height={500}/>
  </Tabs.Tab>
  <Tabs.Tab>
    ```dart copy
    class ModalSheet extends StatelessWidget {
      @override
      Widget build(BuildContext context) => Column(
        mainAxisAlignment: MainAxisAlignment.center,
        mainAxisSize: MainAxisSize.min,
        children: [
          FButton(
            label: const Text('Left'),
            onPress: () => showFSheet(
              context: context,
              side: Layout.ltr,
              builder: (context) => const Form(side: Layout.ltr),
            ),
          ),
          const SizedBox(height: 5),
          FButton(
            label: const Text('Top'),
            onPress: () => showFSheet(
              context: context,
              side: Layout.ttb,
              builder: (context) => const Form(side: Layout.ttb),
            ),
          ),
          const SizedBox(height: 5),
          FButton(
            label: const Text('Right'),
            onPress: () => showFSheet(
              context: context,
              side: Layout.rtl,
              builder: (context) => const Form(side: Layout.btt),
            ),
          ),
          const SizedBox(height: 5),
          FButton(
            label: const Text('Bottom'),
            onPress: () => showFSheet(
              context: context,
              side: Layout.btt,
              builder: (context) => const Form(side: Layout.btt),
            ),
          ),
        ],
      );
    }

    class Form extends StatelessWidget {
      final Layout side;

      const Form({required this.side, super.key});

      @override
      Widget build(BuildContext context) => Container(
            height: double.infinity,
            width: double.infinity,
            decoration: BoxDecoration(
              color: context.theme.colors.background,
              border: side.vertical
                  ? Border.symmetric(horizontal: BorderSide(color: context.theme.colors.border))
                  : Border.symmetric(vertical: BorderSide(color: context.theme.colors.border)),
            ),
            child: Padding(
              padding: const EdgeInsets.symmetric(horizontal: 15, vertical: 8.0),
              child: Center(
                child: Column(
                  mainAxisSize: MainAxisSize.min,
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Text(
                      'Account',
                      style: context.theme.typography.xl2.copyWith(
                        fontWeight: FontWeight.w600,
                        color: context.theme.colors.foreground,
                        height: 1.5,
                      ),
                    ),
                    Text(
                      'Make changes to your account here. Click save when you are done.',
                      style: context.theme.typography.sm.copyWith(
                        color: context.theme.colors.mutedForeground,
                      ),
                    ),
                    const SizedBox(height: 8),
                    SizedBox(
                      width: 450,
                      child: Column(
                        children: [
                          const FTextField(
                            label: Text('Name'),
                            hint: 'John Renalo',
                          ),
                          const SizedBox(height: 10),
                          const FTextField(
                            label: Text('Email'),
                            hint: 'john@doe.com',
                          ),
                          const SizedBox(height: 16),
                          FButton(
                            label: const Text('Save'),
                            onPress: () => Navigator.of(context).pop(),
                          ),
                        ],
                      ),
                    ),
                  ],
                ),
              ),
            ),
          );
    }
    ```
  </Tabs.Tab>
</Tabs>

## Usage

### `showFSheet(...)`

```dart copy
showFSheet(
  context: context,
  side: Layout.ltr,
  useRootNavigator: true,
  useSafeArea: false,
  mainAxisMaxRatio: null,
  constraints: const BoxConstraints(maxWidth: 450, maxHeight: 450),
  barrierDismissible: true,
  draggable: true,
  builder: (context) => const Placeholder(),
);
```

## Examples

### With `DraggableScrollableSheet`

<Tabs items={['Preview', 'Code']}>
  <Tabs.Tab>
    <Widget name='modal-sheet' query={{}} height={400} variant='draggable'/>
  </Tabs.Tab>
  <Tabs.Tab>
    ```dart {9-22} copy
    FButton(
      label: const Text('Click me'),
      onPress: () => showFSheet(
        context: context,
        side: Layout.btt,
        mainAxisMaxRatio: null,
        builder: (context) => DraggableScrollableSheet(
          expand: false,
          builder: (context, controller) => ScrollConfiguration(
            // This is required to enable dragging on desktop.
            // See https://github.com/flutter/flutter/issues/101903 for more information.
            behavior: ScrollConfiguration.of(context).copyWith(dragDevices: {
              PointerDeviceKind.touch,
              PointerDeviceKind.mouse,
              PointerDeviceKind.trackpad,
            }),
            child: FTileGroup.builder(
              count: 25,
              controller: controller,
              tileBuilder: (context, index) => FTile(title: Text('Tile $index')),
            ),
          ),
        ),
      ),
    );
    ```
  </Tabs.Tab>
</Tabs>

